{% extends 'base_auth.html' %}

{% block body %}

{% block head %}
    <style>
        body {
            background-color: white;
            font-family: Arial, sans-serif;
            color: black; /* Change text color to black for better visibility on white background */
        }

        .container {
            margin-top: 50px;
        }

        .btn-primary {
            background-color: #3e7c4d;
            border: none;
        }

        .table {
            background-color: white;
            border-radius: 10px;
        }

        .table th {
            background-color: #3e7c4d;
            color: white;
        }

        .table th,
        .table td {
            padding: 10px;
        }

        /* Set background color for all rows to white */
        .table-striped tbody tr {
            background-color: white;
        }

        /* Effet de survol */
        .table-striped tbody tr:hover {
            background-color: #f0f0f0; /* Couleur de fond au survol */
        }

        .btn-secondary,
        .btn-primary,
        .btn-danger {
            margin-right: 5px;
        }

        .btn-group {
            margin-left: 5px;
        }

        .btn-group form {
            display: inline;
        }

        .alert-error {
            background-color: red;
            color: white;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
{% endblock %}


<div class="container">
    <div class="row mt-3">
        <div class="col-md-6">
            <h2>Liste des utilisateurs</h2>
        </div>
        <div class="col-md-6 text-right">
            <a href="add_user.php" class="btn btn-primary"><span class="bi bi-plus-circle"></span> Ajouter un utilisateur</a>
        </div>
    </div>

    <table class="table table-striped mt-3">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Surname</th>
                <th>Email</th>
                <th>Phone Number</th>
                <th>Created At</th>
                <th>Updated At</th>
                <th>User Type</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user['user_id']}}</td>
                    <td>{{ user['name']}}</td>
                    <td>{{ user['surname']}}</td>
                    <td>{{ user['email']}}</td>
                    <td>{{ user['phone_number']}}</td>
                    <td>{{ user['created_at']}}</td>
                    <td>{{ user['updated_at']}}</td>
                    <td>
                        <form method="post">
                            <input type="hidden" name="user_id" value="{{ user['user_id'] }}">
                            <div class="dropdown">
                                <select name="user_type" class="btn btn-primary dropdown-toggle" onchange="this.form.submit()">
                                    <option value="standardiste" {% if user['user_type'] == 'standardiste' %} selected {% endif %}>Standardiste</option>
                                    <option value="client" {% if user['user_type'] == 'client' %} selected {% endif %}>Client</option>
                                    <option value="intervenant" {% if user['user_type'] == 'intervenant' %} selected {% endif %}>Intervenant</option>
                                    <option value="admin" {% if user['user_type'] == 'admin' %} selected {% endif %}>Admin</option>
                                </select>
                            </div>
                        </form>
                    </td>
                    <td>
                        <div class="btn-group" role="group">
                            <form method="get" action="read.php" class="d-inline">
                                <input type="hidden" name="id" value="{{ user['user_id'] }}">
                                <button type="submit" class="btn btn-secondary"><span class="bi bi-eye"></span></button>
                            </form>
                            <form method="post" action="update.php" class="d-inline">
                                <input type="hidden" name="user_id" value="{{ user['user_id'] }}">
                                <button type="submit" class="btn btn-primary"><span class="bi bi-pencil"></span></button>
                            </form>
                            <form method="post" action="delete.php" class="d-inline">
                                <input type="hidden" name="user_id" value="{{ user['user_id'] }}">
                                <button type="submit" class="btn btn-danger"><span class="bi bi-trash"></span></button>
                            </form>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
